<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Edit Pupil</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f9fafb;
    }
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
      background-color: #1565c0; /* ✅ Blue background */
    }
    .navbar-brand {
      color: #fff !important;
      font-weight: 600;
      font-size: 1.2rem;
    }
    .back-btn {
      background-color: #c62828; /* ✅ Red background */
      color: #fff;
      border: none;
      padding: 6px 12px;
      font-size: 0.9rem;
      border-radius: 4px;
      display: flex;
      align-items: center;
      text-decoration: none;
    }
    .back-btn i { margin-right: 6px; }
    .back-btn:hover {
      background-color: #b71c1c;
      color: #fff;
    }
    main {
      margin-top: 80px;
      margin-bottom: 120px;
    }
    .form-container {
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 20px;
    }
    footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      background-color: #f8f9fa;
      border-top: 1px solid #dee2e6;
    }
  </style>
</head>
<body>
  <!-- Fixed Navbar -->
  <nav class="navbar navbar-dark">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <span class="navbar-brand"><i class="bi bi-pencil-square me-2"></i>Edit Pupil</span>
      <a href="{{ url_for('secretary_routes.manage_pupils') }}" class="back-btn">
        <i class="bi bi-house-door-fill"></i> Back to Pupils
      </a>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container">
    <div class="form-container mt-4">
      <form method="POST" action="{{ url_for('secretary_routes.update_pupil', pupil_id=pupil.id) }}" enctype="multipart/form-data">
        <div class="row g-3">
          <!-- Admission & Receipt -->
          <div class="col-md-6">
            <label class="form-label">Admission Number</label>
            <input type="text" class="form-control" name="admission_number" value="{{ pupil.admission_number }}" readonly>
          </div>
          <div class="col-md-6">
            <label class="form-label">Receipt Number</label>
            <input type="text" class="form-control" name="receipt_number" value="{{ pupil.receipt_number }}" readonly>
          </div>

          <!-- Admission Date & Pupil ID -->
          <div class="col-md-6">
            <label class="form-label">Admission Date</label>
            <input type="date" class="form-control" name="admission_date" value="{{ pupil.admission_date }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Pupil ID</label>
            <input type="text" class="form-control" name="pupil_id" value="{{ pupil.pupil_id }}" readonly>
          </div>

          <!-- Names -->
          <div class="col-md-4">
            <label class="form-label">First Name</label>
            <input type="text" class="form-control" name="first_name" value="{{ pupil.first_name }}">
          </div>
          <div class="col-md-4">
            <label class="form-label">Middle Name</label>
            <input type="text" class="form-control" name="middle_name" value="{{ pupil.middle_name }}">
          </div>
          <div class="col-md-4">
            <label class="form-label">Last Name</label>
            <input type="text" class="form-control" name="last_name" value="{{ pupil.last_name }}">
          </div>

          <!-- Gender & DOB -->
          <div class="col-md-6">
            <label class="form-label">Gender</label>
            <select class="form-select" name="gender">
              <option value="Male" {% if pupil.gender == "Male" %}selected{% endif %}>Male</option>
              <option value="Female" {% if pupil.gender == "Female" %}selected{% endif %}>Female</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">Date of Birth</label>
            <input type="date" class="form-control" name="dob" value="{{ pupil.dob }}">
          </div>

          <!-- Nationality & Place of Birth -->
          <div class="col-md-6">
            <label class="form-label">Nationality</label>
            <input type="text" class="form-control" name="nationality" value="{{ pupil.nationality }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Place of Birth</label>
            <input type="text" class="form-control" name="place_of_birth" value="{{ pupil.place_of_birth }}">
          </div>

          <!-- Contact -->
          <div class="col-md-12">
            <label class="form-label">Home Address</label>
            <textarea class="form-control" name="home_address">{{ pupil.home_address }}</textarea>
          </div>
          <div class="col-md-6">
            <label class="form-label">Phone</label>
            <input type="text" class="form-control" name="phone" value="{{ pupil.phone }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Email</label>
            <input type="email" class="form-control" name="email" value="{{ pupil.email }}">
          </div>

          <!-- Emergency -->
          <div class="col-md-6">
            <label class="form-label">Emergency Contact</label>
            <input type="text" class="form-control" name="emergency_contact" value="{{ pupil.emergency_contact }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Emergency Phone</label>
            <input type="text" class="form-control" name="emergency_phone" value="{{ pupil.emergency_phone }}">
          </div>

          <!-- Guardian -->
          <div class="col-md-6">
            <label class="form-label">Guardian Name</label>
            <input type="text" class="form-control" name="guardian_name" value="{{ pupil.guardian_name }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Guardian Relationship</label>
            <input type="text" class="form-control" name="guardian_relationship" value="{{ pupil.guardian_relationship }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Guardian Occupation</label>
            <input type="text" class="form-control" name="guardian_occupation" value="{{ pupil.guardian_occupation }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Guardian Phone</label>
            <input type="text" class="form-control" name="guardian_phone" value="{{ pupil.guardian_phone }}">
          </div>
          <div class="col-md-12">
            <label class="form-label">Guardian Address</label>
            <textarea class="form-control" name="guardian_address">{{ pupil.guardian_address }}</textarea>
          </div>

          <!-- Class & Stream -->
          <div class="col-md-6">
            <label class="form-label">Class</label>
            <select class="form-select" name="class_id">
              {% for class in classes %}
                <option value="{{ class.id }}" {% if pupil.class_id == class.id %}selected{% endif %}>{{ class.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">Stream</label>
            <select class="form-select" name="stream_id">
              {% for stream in streams %}
                <option value="{{ stream.id }}" {% if pupil.stream_id == stream.id %}selected{% endif %}>{{ stream.name }}</option>
              {% endfor %}
            </select>
          </div>

          <!-- Previous School & Roll Number -->
          <div class="col-md-6">
            <label class="form-label">Previous School</label>
            <input type="text" class="form-control" name="previous_school" value="{{ pupil.previous_school }}">
          </div>
          <div class="col-md-6">
            <label class="form-label">Roll Number</label>
            <input type="text" class="form-control" name="roll_number" value="{{ pupil.roll_number }}" readonly>
          </div>

          <!-- Enrollment Status -->
          <div class="col-md-6">
            <label class="form-label">Enrollment Status</label>
            <select class="form-select" name="enrollment_status">
              <option value="Active" {% if pupil.enrollment_status == "Active" %}selected{% endif %}>Active</option>
              <option value="Inactive" {% if pupil.enrollment_status == "Inactive" %}selected{% endif %}>Inactive</option>
              <option value="Graduated" {% if pupil.enrollment_status == "Graduated" %}selected{% endif %}>Graduated</option>
              <option value="Transferred" {% if pupil.enrollment_status == "Transferred" %}selected{% endif %}>Transferred</option>
            </select>
          </div>

          <!-- Profile Image -->
          <div class="col-md-12">
            <label class="form-label">Profile Image</label>
            {% if pupil.photo %}
              <div class="mb-2">
                <img src="{{ pupil.photo }}" alt="Profile" class="img-thumbnail" style="max-height:100px;">
              </div>
            {% endif %}
            <input type="file" class="form-control" name="profile_image">
          </div>

          <!-- Submit -->
          <div class="col-12 text-center mt-3">
            <button type="submit" class="btn btn-success">
              <i class="bi bi-save-fill me-2"></i> Save Changes
            </button>
          </div>
        </div>
      </form>
    </div>
  </main>

  <!-- Fixed Footer -->
  <footer class="text-center py-3">
    {% include 'footer.html' %}
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
