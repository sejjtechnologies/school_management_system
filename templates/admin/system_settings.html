<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>System Settings - Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    :root{
      --primary:#4a148c;
      --muted:#6c757d;
      --bg:#f8f9fa;
      --sidebar-bg: #ffffff;
      --accent: #00796b;
    }
    body{
      font-family: 'Segoe UI', sans-serif;
      background:var(--bg);
      margin:0; padding:0;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
    .navbar{background:var(--primary); height:60px}
    .navbar .navbar-brand{color:#fff !important; display:flex; align-items:center; gap:10px}
    .app-shell{display:flex; flex:1; min-height: calc(100vh - 60px);}
    .sidebar{width:220px; background:var(--sidebar-bg); border-right:1px solid #e9ecef; padding:18px 12px;}
    .sidebar .logo{display:flex; align-items:center; gap:10px; padding:8px 6px; margin-bottom:18px}
    .sidebar .logo img{height:42px; width:auto}
    .sidebar .nav-btn{
      display:flex; align-items:center; gap:10px; width:100%; padding:12px 12px; margin-bottom:10px;
      border-radius:8px; border: 1px solid rgba(0,0,0,0.04); background:transparent; color:var(--muted);
      text-align:left; box-shadow: 0 2px 6px rgba(16,24,40,0.03); font-weight:600; cursor:pointer;
      transition: all 0.2s ease;
    }
    .sidebar .nav-btn i{font-size:18px}
    .sidebar .nav-btn:hover{transform: translateY(-1px); box-shadow: 0 6px 18px rgba(0,0,0,0.06);}
    .sidebar .nav-btn.active{box-shadow:0 6px 18px rgba(0,0,0,0.12); transform: translateY(-1px); border-color: var(--accent);}

    /* Color variants */
    .nav-btn.security{ background: linear-gradient(90deg,#e8f5e9 0%,#c8e6c9 100%); color:#1b5e20 }
    .nav-btn.calendar{ background: linear-gradient(90deg,#e3f2fd 0%,#bbdefb 100%); color:#0d47a1 }
    .nav-btn.payments{ background: linear-gradient(90deg,#fff3e0 0%,#ffe0b2 100%); color:#e65100 }
    .nav-btn.backup{ background: linear-gradient(90deg,#f3e5f5 0%,#e1bee7 100%); color:#4a148c }
    .nav-btn.theme{ background: linear-gradient(90deg,#fff9c4 0%,#fff59d 100%); color:#f57f17 }

    .content{flex:1; padding:26px; overflow-y:auto;}
    .settings-card{background:#fff; border-radius:10px; padding:20px; box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    .settings-list .setting-item{display:flex; align-items:center; justify-content:space-between; padding:12px 0; border-bottom:1px dashed #eee}
    .settings-list .setting-item:last-child{border-bottom:0}

    @media (max-width:768px){
      .sidebar{width:160px; padding:12px 8px}
      .sidebar .nav-btn{padding:10px 8px; font-size:0.9rem}
    }
  </style>
</head>
<body>
  <nav class="navbar fixed-top navbar-expand-lg">
    <div class="container-fluid px-3">
      <a class="navbar-brand fw-bold" href="#" style="display:flex; align-items:center; gap:10px;">
        <img src="/static/logo.png" alt="Logo" style="height:36px; width:auto">
        <span style="color:#fff">System Settings</span>
      </a>
      <div class="ms-auto">
        <a href="{{ url_for('admin_routes.dashboard') }}" class="btn" style="background:#ffffff;color:#dc3545;border:none;padding:6px 10px;border-radius:6px; display:flex; align-items:center; gap:8px">
          <i class="bi bi-box-arrow-left" style="color:#dc3545"></i> Back
        </a>
      </div>
    </div>
  </nav>

  <div class="app-shell" style="padding-top:60px">
    <aside class="sidebar">
      <div class="logo"><img src="/static/logo.png" alt="icon"><strong>Admin</strong></div>

      <button class="nav-btn security" type="button" data-content="security"><i class="bi bi-shield-lock-fill"></i> Session &amp; Security</button>
      <button class="nav-btn calendar" type="button" data-content="calendar"><i class="bi bi-calendar3"></i> Academic Calendar</button>
      <button class="nav-btn payments" type="button" data-content="payments"><i class="bi bi-credit-card-2-front-fill"></i> Payment &amp; Receipts</button>
      <a href="{{ url_for('admin_routes.backup_maintenance') }}" class="nav-btn backup" type="button"><i class="bi bi-hdd-fill"></i> Backup &amp; Maintenance</a>
      <button class="nav-btn theme" type="button" data-content="theme"><i class="bi bi-brightness-high-fill"></i> Light / Dark Theme</button>

      <div style="height:10px"></div>
      <small class="text-muted">(Buttons load content in place â€” no page reload except Backup & Maintenance)</small>
    </aside>

    <main class="content" id="main-content">
      <div class="settings-card" id="default-content">
        <h4>Welcome to System Settings</h4>
        <p>Select an option from the sidebar to load its content here.</p>
      </div>
    </main>
  </div>

  {% include 'footer.html' %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const contentMap = {
      security: `
        <div class="settings-card">
          <h4>Session & Security</h4>
          <div class="settings-list">
            <div class="setting-item"><span>Password Expiration</span><span>90 days</span></div>
            <div class="setting-item"><span>Two-Factor Authentication</span><span>Enabled</span></div>
          </div>
        </div>
      `,
      calendar: `
        <div class="settings-card">
          <h4>Academic Calendar</h4>
          <p>Here you can manage semesters, holidays, and events.</p>
        </div>
      `,
      payments: `
        <div class="settings-card">
          <h4>Payments & Receipts</h4>
          <p>Manage transactions, receipts, and financial reports here.</p>
        </div>
      `,
      theme: `
        <div class="settings-card">
          <h4>Light / Dark Theme</h4>
          <button class="btn btn-dark me-2" onclick="document.body.classList.add('bg-dark');document.body.style.color='#fff';">Dark</button>
          <button class="btn btn-light" onclick="document.body.classList.remove('bg-dark');document.body.style.color='';">Light</button>
        </div>
      `
    };

    const buttons = document.querySelectorAll('.nav-btn');
    const mainContent = document.getElementById('main-content');

    function setActiveButton(activeBtn){
      buttons.forEach(btn => btn.classList.remove('active'));
      if(!activeBtn.classList.contains('backup')) { // Do not activate backup link
        activeBtn.classList.add('active');
      }
    }

    buttons.forEach(btn => {
      // Only intercept buttons that have data-content
      if(btn.dataset.content){
        btn.addEventListener('click', () => {
          const key = btn.dataset.content;
          mainContent.innerHTML = contentMap[key] || '<p>Content not found.</p>';
          setActiveButton(btn);
        });
      }
    });

    // Load default content and set first non-backup button as active
    window.addEventListener('DOMContentLoaded', () => {
      const firstBtn = Array.from(buttons).find(b=>b.dataset.content);
      if(firstBtn) firstBtn.click();
    });
  </script>
</body>
</html>
